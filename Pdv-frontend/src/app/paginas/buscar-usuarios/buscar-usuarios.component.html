<div class="container contenedor-principal">
  <div class="row pt-3">
    <div class="col-12 titulo">
      <h1 class="fw-bold">Buscador de Usuarios</h1>
    </div>

    <form [formGroup]="buscadorUsuarios" class="row mt-4">
      <mat-form-field class="col-sm-5 col-lg-3 me-2">
        <mat-label>Nombre de usuario</mat-label>
        <input matInput placeholder="Introduzca nombre de usuario" formControlName="nombre" (change)="paginaActual = 0"/>
      </mat-form-field>

      <mat-form-field class="col-sm-5 col-lg-3 me-2">
        <mat-label>Correo electrónico</mat-label>
        <input matInput placeholder="Introduzca correo electrónico" formControlName="correoElectronico" (change)="paginaActual = 0"/>
      </mat-form-field>

      <mat-form-field class="col-10 col-sm-10 col-lg-3 me-2">
        <mat-label>DNI</mat-label>
        <input matInput placeholder="Introduzca DNI" formControlName="dni" (change)="paginaActual = 0"/>
      </mat-form-field>
      <i class="bi bi-search ms-md-2 mt-3 col-1" (click)="buscarUsuarios(true)"></i>
    </form>

    <div class="row mt-2" >
      @for (user of usuarios; track user.username) {
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4  lista-usuarios" routerLink="/ver-perfil/{{user.username}}">
        <img class="me-2 imagen-usuario" src="../../../assets/paginaRegistro/perfil-de-usuario.jpg">
        <h2 class="mt-1 fw-bold">{{user.username}}</h2>
      </div>
      }
      <nav class="d-flex justify-content-center w-100">
        <ul class="pagination">
          <li class="page-item">
            <a class="page-link" aria-label="Previous" (click)="cambiarPage(this.paginaActual - 1)">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          @if(paginaActual <= 1){
            <li class="page-item" (click)="cambiarPage(0)"><a class="page-link">1</a></li>
            <li class="page-item" (click)="cambiarPage(1)"><a class="page-link">2</a></li>
            <li class="page-item" (click)="cambiarPage(2)"><a class="page-link">3</a></li>
          }@else {
            <li class="page-item" (click)="cambiarPage(this.paginaActual - 1)"><a class="page-link">{{paginaActual}}</a></li>
            <li class="page-item" (click)="cambiarPage(this.paginaActual)"><a class="page-link" >{{paginaActual + 1}}</a></li>
            <li class="page-item" (click)="cambiarPage(this.paginaActual + 1)"><a class="page-link" >{{paginaActual + 2}}</a></li>
          }
          <li class="page-item">
            <a class="page-link" aria-label="Next" (click)="cambiarPage(this.paginaActual + 1)">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>